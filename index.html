<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SUMMIT ACADEMY — Внутренний сайт</title>
  <meta name="color-scheme" content="light">
  <style>
    :root{
      --primary:#0a2a6b;
      --accent:#FFD400;
      --ink:#0b1220;
      --muted:#606a83;
      --bg:#0b1733;
      --surface:#ffffff;
      --ring:#205EDC55;
      --good:#16a34a; --good-b:#e9f7ee;
      --bad:#dc2626;  --bad-b:#faebea;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:linear-gradient(180deg,#f7f9ff 0%, #f3f6fe 100%);
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    .topbar{
      position:sticky; top:0; z-index:40;
      backdrop-filter:saturate(1.2) blur(10px);
      background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.86));
      border-bottom:1px solid #e7ebf6;
    }
    .container{max-width:1100px;margin:0 auto;padding:18px}
    .row{display:flex;flex-wrap:wrap;gap:14px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{width:44px;height:44px;object-fit:contain}
    .brand-title{font-weight:900; color:var(--primary); letter-spacing:.3px}
    .brand-sub{font-size:12px; color:var(--primary); opacity:.85}
    .actions{margin-left:auto; display:flex; gap:10px}
    .btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 16px; border-radius:14px; border:0; cursor:pointer;
      font-weight:800; text-decoration:none; transition:.15s ease;
    }
    .btn:focus-visible{ outline:3px solid var(--ring); outline-offset:2px }
    .btn-primary{ background:linear-gradient(180deg,#123a8b,#0a2a6b); color:#fff; box-shadow:0 8px 24px #0a2a6b33 }
    .btn-primary:hover{ transform:translateY(-1px) }
    .btn-accent{ background:linear-gradient(180deg,#ffe86a,#FFD400); color:#1a2038; box-shadow:0 8px 22px #FFD40055 }
    .btn-accent:hover{ transform:translateY(-1px) }
    .hero{
      background:
        radial-gradient(1200px 600px at 50% -200px, #4266c733 0%, transparent 60%),
        linear-gradient(180deg, #0b1733 0%, #0f214a 100%);
      color:#e6ecff;
      border-bottom:1px solid #09204a;
    }
    .hero-wrap{max-width:1100px;margin:0 auto;padding:40px 18px 28px 18px; display:grid; grid-template-columns:1fr; align-items:center; gap:18px}
    .crest{width:200px;height:200px;display:grid;place-items:center;background:transparent;border-radius:0;box-shadow:none;padding:0;}
    .crest img{width:100%;height:100%;object-fit:contain;}
    .hero h1{ margin:0 0 6px 0; font-weight:900; letter-spacing:.3px; font-size:28px; }
    .hero p{ margin:0; color:#c9d6ff; font-size:14px }
    .section{max-width:1100px;margin:16px auto;padding:0 18px}
    .card{
      border:1px solid #e7ebf6;
      border-radius:20px; background:var(--surface);
      box-shadow:0 12px 34px #0a2a6b10;
      overflow:hidden;
    }
    .card-h{ padding:16px 18px; background:#f6f8ff; border-bottom:1px solid #e7ebf6; color:var(--primary); font-weight:900 }
    .card-b{ padding:18px }
    iframe{ width:100%; height:640px; border:0; border-radius:16px; box-shadow:0 10px 30px #0a2a6b0a }
    .muted{ color:var(--muted); font-size:13px }
    .q{
      padding:14px; border:1px solid #e7ebf6; border-radius:14px; cursor:pointer;
      display:flex; gap:10px; align-items:flex-start; background:#fff;
      transition: background .15s ease, box-shadow .15s ease, border-color .15s ease, transform .05s ease;
    }
    .q:hover{ background:#f7f9ff }
    .q.sel{ border-color:#205EDC80; box-shadow:0 0 0 5px #205EDC14 }
    .k{ font-weight:900; margin-right:4px; color:#203a84 }
    .ok { border-color:var(--good); background:var(--good-b) }
    .bad{ border-color:var(--bad);  background:var(--bad-b) }
    .btn:disabled{ opacity:.55; cursor:not-allowed }
    .progress{ height:10px; background:#eef3ff; border-radius:999px; overflow:hidden; border:1px solid #e1e7fb }
    .progress > span{ display:block; height:100%; width:0; background:linear-gradient(90deg,#FFD400,#ffe45a); transition:width .25s ease }
    footer{ border-top:1px solid #e7ebf6; margin-top:28px }
  </style>
</head>
<body>
  <section class="hero">
    <div class="hero-wrap">
      
      <div>
        <h1>Summit Academy</h1>
        <p>Место, где рождаются лидеры и пишется история</p>
      </div>
    </div>
  </section>

  <div class="section">
    <div class="card">
      <div class="card-h">Быстрые действия</div>
      <div class="card-b row">
        <a href="#test" class="btn btn-primary">Начать тестирование</a>
        <a href="#form" class="btn btn-accent">Открыть анкету</a>
      </div>
    </div>
  </div>

  <div id="form" class="section">
    <div class="card">
      <div class="card-h">Анкета</div>
      <div class="card-b">
        <iframe
          src="https://fedchenko.s20.online/common/7/form/draw?id=2&amp;baseColor=205EDC&amp;borderRadius=8&amp;css=%2F%2Fcdn.alfacrm.pro%2Flead-form%2Fform.css"
          title="CRM Form"></iframe>
      </div>
    </div>
  </div>

  <div id="test" class="section">
    <div class="card">
      <div class="card-h">Определение уровня</div>
      <div class="card-b">
        <div id="test-setup">
          <div class="row" style="gap:18px">
            <div>
              <div style="font-weight:900; margin-bottom:8px">Профиль</div>
              <label class="q" style="align-items:center; gap:8px;"><input type="radio" name="track" value="senior" checked> <span class="k">Senior</span> <span>(Gateway)</span></label>
              <label class="q" style="align-items:center; gap:8px;"><input type="radio" name="track" value="junior"> <span class="k">Junior</span> <span>(Academy Stars)</span></label>
            </div>
            <div>
              <div style="font-weight:900; margin-bottom:8px">Длина теста</div>
              <label class="q" style="align-items:center; gap:8px;"><input type="radio" name="len" value="20" checked> Короткий (20)</label>
              <label class="q" style="align-items:center; gap:8px;"><input type="radio" name="len" value="40"> Средний (40)</label>
              <label class="q" style="align-items:center; gap:8px;"><input type="radio" name="len" value="60"> Полный (60)</label>
            </div>
          </div>
          <div style="margin-top:14px">
            <button id="start" class="btn btn-primary">Начать</button>
            <span class="muted">Вопросы идут по одному. После выбора ответа — «Далее».</span>
          </div>
        </div>

        <div id="test-run" style="display:none">
          <div class="row" style="align-items:center; justify-content:space-between; margin-bottom:10px;">
            <div id="progress-label" class="muted"></div>
            <div style="min-width:180px; flex:1; margin-left:14px;">
              <div class="progress"><span id="progress-bar"></span></div>
            </div>
          </div>
          <div id="question" style="font-weight:900; font-size:20px; margin:12px 0 14px 0;"></div>
          <div id="choices" class="row" style="flex-direction:column"></div>
          <div class="row" style="margin-top:12px;">
            <button id="next" class="btn btn-accent" disabled>Далее</button>
          </div>
        </div>

        <div id="test-result" style="display:none">
          <div id="summary" style="font-weight:900; color:var(--primary); font-size:20px;"></div>
          <div class="muted" style="margin-top:6px;">Разбор по вопросам: зелёный — верно, красный — неверно.</div>
          <div id="review" style="margin-top:12px;" class="row"></div>
          <div style="margin-top:12px;">
            <button id="restart" class="btn btn-primary">Пройти заново</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <div class="container" style="padding:16px; font-size:12px; color:#6c7590;">© <span id="year"></span> SUMMIT ACADEMY · Внутренний портал</div>
  </footer>

  <script>
  document.addEventListener('DOMContentLoaded', function(){
    document.getElementById('year').textContent = new Date().getFullYear();

    const GATEWAY_ANSWERS = {1:'C',2:'A',3:'A',4:'C',5:'A',6:'B',7:'C',8:'C',9:'B',10:'C',11:'A',12:'B',13:'A',14:'C',15:'B',16:'B',17:'B',18:'C',19:'A',20:'B',21:'C',22:'C',23:'C',24:'C',25:'B',26:'C',27:'C',28:'A',29:'C',30:'A',31:'B',32:'C',33:'C',34:'A',35:'C',36:'B',37:'C',38:'A',39:'D',40:'B',41:'B',42:'C',43:'C',44:'B',45:'C',46:'B',47:'C',48:'D',49:'D',50:'C',51:'B',52:'A',53:'A',54:'C',55:'C',56:'B',57:'C',58:'D',59:'A',60:'C'};
    const GATEWAY_QUESTIONS = [
      { n:1, text:"I ……………. got a computer but I’ve got a tablet.", choices:[{key:'A',text:"don’t"},{key:'B',text:"’ve"},{key:'C',text:"haven’t"}]},
      { n:2, text:"Sue: I love Rita Ora! ……………. her?  Mike: No. I prefer Ed Sheeran.", choices:[{key:'A',text:"Do you like"},{key:'B',text:"Are you like"},{key:'C',text:"Does you like"}]},
      { n:3, text:"Marie: ……………. play a musical instrument, John?  John: Yes. I play the piano.", choices:[{key:'A',text:"Can you"},{key:'B',text:"Do you can"},{key:'C',text:"Are you"}]},
      { n:4, text:"That’s Jana. She’s ……………. to her friend.", choices:[{key:'A',text:"talks"},{key:'B',text:"talk"},{key:'C',text:"talking"}]},
      { n:5, text:"Amy: Where ……………. you yesterday?  Jill: I was at my grandmother’s house.", choices:[{key:'A',text:"were"},{key:'B',text:"did"},{key:'C',text:"are"}]},
      { n:6, text:"Angel: Messi’s the ……………. footballer in the world.  Ricardo: No, he isn’t. Ronaldo is!", choices:[{key:'A',text:"most good"},{key:'B',text:"best"},{key:'C',text:"better"}]},
      { n:7, text:"I ……………. to the radio every day.", choices:[{key:'A',text:"read"},{key:'B',text:"watch"},{key:'C',text:"listen"}]},
      { n:8, text:"Dad: Where are you going?  Mum: To the …………….. I need to buy some boots.", choices:[{key:'A',text:"chemist’s"},{key:'B',text:"newsagent’s"},{key:'C',text:"shoe shop"}]},
      { n:9, text:"Mary is very …………….. She always helps me when I have a problem.", choices:[{key:'A',text:"hard-working"},{key:'B',text:"kind"},{key:'C',text:"creative"}]},
      { n:10, text:"You ……………. tell anyone – it’s a secret.", choices:[{key:'A',text:"don’t have to"},{key:'B',text:"must"},{key:'C',text:"mustn’t"}]},
      { n:11, text:"When I was five I ……………. swim but now I can.", choices:[{key:'A',text:"couldn’t"},{key:'B',text:"can’t"},{key:'C',text:"could"}]},
      { n:12, text:"While we ……………. to school, it started snowing. It was beautiful!", choices:[{key:'A',text:"was walking"},{key:'B',text:"were walking"},{key:'C',text:"walked"}]},
      { n:13, text:"Harry: What are you doing tonight?  Ben: I ……………. basketball with Michael.", choices:[{key:'A',text:"’m playing"},{key:'B',text:"will play"},{key:'C',text:"play"}]},
      { n:14, text:"I haven’t finished cleaning my bike ……………..", choices:[{key:'A',text:"already"},{key:'B',text:"just"},{key:'C',text:"yet"}]},
      { n:15, text:"If ……………. to the concert later, ……………. with you.", choices:[{key:'A',text:"you’ll go / I come"},{key:'B',text:"you go / I’ll come"},{key:'C',text:"you go / I come"}]},
      { n:16, text:"He’s a …………….. He writes articles for the newspaper.", choices:[{key:'A',text:"dentist"},{key:'B',text:"journalist"},{key:'C',text:"secretary"}]},
      { n:17, text:"Customer: I’d like a ……………. of pizza, please.", choices:[{key:'A',text:"packet"},{key:'B',text:"slice"},{key:'C',text:"carton"}]},
      { n:18, text:"George: These trousers are a bit big.  Dad: Yes, I think you need to buy a …………….", choices:[{key:'A',text:"cap"},{key:'B',text:"scarf"},{key:'C',text:"belt"}]},
      { n:19, text:"That is the man ……………. name I can’t pronounce.", choices:[{key:'A',text:"whose"},{key:'B',text:"who"},{key:'C',text:"which"}]},
      { n:20, text:"My best friend isn’t ……………. my sister.", choices:[{key:'A',text:"as old than"},{key:'B',text:"as old as"},{key:'C',text:"so old than"}]},
      { n:21, text:"Can you turn the music down, it’s ……………..", choices:[{key:'A',text:"not enough loud"},{key:'B',text:"not loud enough"},{key:'C',text:"too loud"}]},
      { n:22, text:"What ……………. if you ……………. €100 in the street?", choices:[{key:'A',text:"will you do / found"},{key:'B',text:"would you do / would find"},{key:'C',text:"would you do / found"}]},
      { n:23, text:"My brother and sister ……………. play football together when they were younger.", choices:[{key:'A',text:"did use to"},{key:'B',text:"use to"},{key:'C',text:"used to"}]},
      { n:24, text:"I enjoyed ……………. my homework last night.", choices:[{key:'A',text:"do"},{key:'B',text:"to do"},{key:'C',text:"doing"}]},
      { n:25, text:"I sang too much at the concert and now my throat is ……………..", choices:[{key:'A',text:"injured"},{key:'B',text:"sore"},{key:'C',text:"ache"}]},
      { n:26, text:"I am very ……………. in learning Chinese next year.", choices:[{key:'A',text:"interesting"},{key:'B',text:"interest"},{key:'C',text:"interested"}]},
      { n:27, text:"If I don’t know a word I always ……………. using an online dictionary.", choices:[{key:'A',text:"look it for"},{key:'B',text:"look up it"},{key:'C',text:"look it up"}]},
      { n:28, text:"I’ve lived in London ……………. 20 years but I’ve never visited London Zoo.", choices:[{key:'A',text:"for"},{key:'B',text:"since"},{key:'C',text:"from"}]},
      { n:29, text:"By this time next week, we ……………. our exams and we’ll be on holiday!", choices:[{key:'A',text:"’ll be finishing"},{key:'B',text:"’re going to finish"},{key:'C',text:"’ll have finished"}]},
      { n:30, text:"This film, ……………. won three Oscars, stars Johnny Depp and is directed by Tim Burton.", choices:[{key:'A',text:"which"},{key:'B',text:"where"},{key:'C',text:"that"}]},
      { n:31, text:"It ……………. John who used the computer because he doesn’t know the password.", choices:[{key:'A',text:"mustn’t be"},{key:'B',text:"can’t have been"},{key:'C',text:"might have been"}]},
      { n:32, text:"If you ……………. football for five hours you ……………. so tired.", choices:[{key:'A',text:"wouldn’t have played / wouldn’t have felt"},{key:'B',text:"hadn’t played / won’t feel"},{key:'C',text:"hadn’t played / wouldn’t have felt"}]},
      { n:33, text:"I wish I ……………. as well as her. She’s got such a lovely voice.", choices:[{key:'A',text:"sing"},{key:'B',text:"can sing"},{key:'C',text:"could sing"}]},
      { n:34, text:"When we entered the church it was ……………. inside.", choices:[{key:'A',text:"absolutely packed"},{key:'B',text:"very enormous"},{key:'C',text:"absolutely old"}]},
      { n:35, text:"My teacher is very good ……………. grammar.", choices:[{key:'A',text:"for explain"},{key:'B',text:"in explaining"},{key:'C',text:"at explaining"}]},
      { n:36, text:"Sally, could you ……………. me some money, please?", choices:[{key:'A',text:"owe"},{key:'B',text:"lend"},{key:'C',text:"borrow"}]},
      { n:37, text:"Tom: Where are you? ……………. here for an hour.", choices:[{key:'A',text:"I wait"},{key:'B',text:"I’m waiting"},{key:'C',text:"I’ve been waiting"},{key:'D',text:"I’d been waiting"}]},
      { n:38, text:"It was ……………. hot that we decided to stay at home.", choices:[{key:'A',text:"so"},{key:'B',text:"very"},{key:'C',text:"too"},{key:'D',text:"such a"}]},
      { n:39, text:"The ……………. I concentrate the ……………. I finish my work.", choices:[{key:'A',text:"more hard / fastest"},{key:'B',text:"hardly / faster"},{key:'C',text:"harder / fastest"},{key:'D',text:"harder / faster"}]},
      { n:40, text:"You ……………. brought food. We have got plenty here.", choices:[{key:'A',text:"had better"},{key:'B',text:"needn’t have"},{key:'C',text:"didn’t need"},{key:'D',text:"should have"}]},
      { n:41, text:"We’ll play a game tonight ……………. you have done your homework.", choices:[{key:'A',text:"unless"},{key:'B',text:"provided"},{key:'C',text:"supposed"},{key:'D',text:"if only"}]},
      { n:42, text:"You won a prize for your paintings, …………….", choices:[{key:'A',text:"isn’t it?"},{key:'B',text:"haven’t you?"},{key:'C',text:"didn’t you?"},{key:'D',text:"don’t you?"}]},
      { n:43, text:"The ……………. from the airport into London was expensive but quick.", choices:[{key:'A',text:"travel"},{key:'B',text:"trip"},{key:'C',text:"journey"},{key:'D',text:"voyage"}]},
      { n:44, text:"When I ……………. money, I usually take out €40 from the cash machine.", choices:[{key:'A',text:"pick up"},{key:'B',text:"withdraw"},{key:'C',text:"set aside"},{key:'D',text:"deposit"}]},
      { n:45, text:"Max always ……………. his important computer documents on an external drive.", choices:[{key:'A',text:"prints out"},{key:'B',text:"saves up"},{key:'C',text:"backs up"},{key:'D',text:"sets off"}]},
      { n:46, text:"If the computer doesn’t work try ……………. it off and on again.", choices:[{key:'A',text:"to switch"},{key:'B',text:"switching"},{key:'C',text:"switch"},{key:'D',text:"having switched"}]},
      { n:47, text:"The suspect ……………. being near the bank at the time of the crime.", choices:[{key:'A',text:"claimed"},{key:'B',text:"accused"},{key:'C',text:"denied"},{key:'D',text:"refused"}]},
      { n:48, text:"The man is believed ……………. over a thousand marathons since he started.", choices:[{key:'A',text:"to run"},{key:'B',text:"to be running"},{key:'C',text:"he has run"},{key:'D',text:"to have run"}]},
      { n:49, text:"Paul didn’t like decorating so he got a professional decorator ……………. his flat for him.", choices:[{key:'A',text:"designing"},{key:'B',text:"design"},{key:'C',text:"she designed"},{key:'D',text:"to design"}]},
      { n:50, text:"……………. all her emails, she switched off her computer.", choices:[{key:'A',text:"Sending"},{key:'B',text:"She sent"},{key:'C',text:"Having sent"},{key:'D',text:"Sent"}]},
      { n:51, text:"If you’re angry, just tell him. You should get it off your ……………..", choices:[{key:'A',text:"head"},{key:'B',text:"chest"},{key:'C',text:"back"},{key:'D',text:"foot"}]},
      { n:52, text:"You should take a few days off work. It won’t ……………. you any harm.", choices:[{key:'A',text:"do"},{key:'B',text:"give"},{key:'C',text:"make"},{key:'D',text:"pay"}]},
      { n:53, text:"Slow down, Barry. I can’t ……………. you.", choices:[{key:'A',text:"keep up with"},{key:'B',text:"come up to"},{key:'C',text:"come up with"},{key:'D',text:"reach up with"}]},
      { n:54, text:"Budapest is a wonderful city full of culture and ……………. in history.", choices:[{key:'A',text:"sprawling"},{key:'B',text:"renowned"},{key:'C',text:"steeped"},{key:'D',text:"bustling"}]},
      { n:55, text:"I liked my new English teacher, ……………. was fortunate, as she also was teaching us history.", choices:[{key:'A',text:"who"},{key:'B',text:"what"},{key:'C',text:"which"},{key:'D',text:"that"}]},
      { n:56, text:"Mum: Laura, have you done the dishes yet? Laura: Well, I ……………. doing them, but then I had to answer my phone.", choices:[{key:'A',text:"started to"},{key:'B',text:"did start"},{key:'C',text:"was starting"},{key:'D',text:"have just was"}]},
      { n:57, text:"……………. the film started when the phone rang.", choices:[{key:'A',text:"No sooner had"},{key:'B',text:"Seldom had"},{key:'C',text:"Barely had"},{key:'D',text:"Not until"}]},
      { n:58, text:"Do you remember ……………. your bed when you were a child?", choices:[{key:'A',text:"to do"},{key:'B',text:"doing"},{key:'C',text:"to make"},{key:'D',text:"making"}]},
      { n:59, text:"My aunt Jane bears a(n) ……………. resemblance to a famous rock star.", choices:[{key:'A',text:"uncanny"},{key:'B',text:"sceptical"},{key:'C',text:"intentional"},{key:'D',text:"irrational"}]},
      { n:60, text:"There is a competitive ……………. running through our family.", choices:[{key:'A',text:"line"},{key:'B',text:"consciousness"},{key:'C',text:"streak"},{key:'D',text:"shift"}]},
    ];

    const JUNIOR_ANSWERS={}, JUNIOR_QUESTIONS=[];
    (function buildJunior(){
      const qs=[
        ["How old ___ you?",["are","is","am"],"A"],
        ["She ___ my sister.",["is","are","am"],"A"],
        ["We ___ from Uzbekistan.",["is","are","am"],"B"],
        ["I ___ a student.",["am","is","are"],"A"],
        ["They ___ in the park now.",["is","are","am"],"B"],
        ["My dad ___ coffee every morning.",["drink","drinks","drinking"],"B"],
        ["Can you ___ football?",["play","plays","playing"],"A"],
        ["There ___ a cat under the table.",["is","are","am"],"A"],
        ["There ___ two books on the desk.",["is","are","am"],"B"],
        ["He ___ TV at the moment.",["watch","watches","is watching"],"C"],
        ["I ___ to school yesterday.",["go","went","gone"],"B"],
        ["We have ___ apples.",["a","any","some"],"C"],
        ["Do you like ___ tea?",["a","any","some"],"B"],
        ["She ___ her homework every day.",["do","does","is do"],"B"],
        ["It is the ___ day of the week.",["one","first","once"],"B"],
        ["January is in the ___",["winter","spring","summer"],"A"],
        ["My mother ___ English very well.",["speak","speaks","speaking"],"B"],
        ["He ___ a bike to school.",["ride","rides","is ride"],"B"],
        ["We ___ breakfast at 8 o’clock.",["has","have","having"],"B"],
        ["I would like ___ water.",["any","some","a"],"B"],
        ["Is this your pen? — Yes, it ___",["is","are","am"],"A"],
        ["___ you like pizza?",["Do","Does","Is"],"A"],
        ["She ___ like carrots.",["don’t","doesn’t","isn’t"],"B"],
        ["Tom and Ben ___ brothers.",["is","are","am"],"B"],
        ["Where ___ you live?",["do","does","are"],"A"],
        ["I can ___ the guitar.",["play","to play","playing"],"A"],
        ["There are ___ students in the class.",["much","many","a"],"B"],
        ["How ___ milk do you drink?",["much","many","a lot"],"A"],
        ["She is ___ than her sister.",["tall","taller","the tallest"],"B"],
        ["This is the ___ book.",["interesting","more interesting","most interesting"],"C"],
        ["The opposite of ‘hot’ is ___",["cold","cool","cooler"],"A"],
        ["He ___ his room last weekend.",["cleaned","cleans","is cleaning"],"A"],
        ["We are ___ to the museum tomorrow.",["go","goes","going"],"C"],
        ["What time ___ the lesson start?",["do","does","is"],"B"],
        ["___ your name?",["What","Where","Who"],"A"],
        ["I have got ___ dog.",["the","a","an"],"B"],
        ["She bought ___ orange.",["a","an","the"],"B"],
        ["___ you help me, please?",["Can","Do","Are"],"A"],
        ["There isn’t ___ bread.",["some","any","a"],"B"],
        ["London is the ___ of the UK.",["country","capital","city"],"B"],
        ["My birthday is ___ May.",["in","on","at"],"A"],
        ["The party is ___ Friday evening.",["in","on","at"],"B"],
        ["School starts ___ 8:30.",["in","on","at"],"C"],
        ["He’s good ___ math.",["in","at","for"],"B"],
        ["We must ___ our homework.",["do","make","doing"],"A"],
        ["I’m ___ to music.",["listen","listens","listening"],"C"],
        ["___ is your favorite color?",["What","Who","Where"],"A"],
        ["How ___ is this T-shirt?",["much","many","long"],"A"],
        ["She has ___ hair.",["long","tall","high"],"A"],
        ["___ you ever been to Samarkand?",["Do","Did","Have"],"C"],
        ["If it rains, we ___ stay at home.",["will","would","are"],"A"],
        ["I have ___ books than you.",["few","fewer","less"],"B"],
        ["There is ___ sugar in the bowl.",["a few","a little","few"],"B"],
        ["Let’s ___ football!",["play","to play","played"],"A"],
        ["Please, ___ the window.",["open","opens","to open"],"A"],
        ["Don’t ___ late!",["be","is","are"],"A"],
        ["We ___ already finished.",["have","has","are"],"A"],
        ["She ___ to music every day.",["listen","listens","is listen"],"B"],
        ["They ___ in Tashkent last year.",["were","are","was"],"A"],
        ["He ___ taller than me.",["is","are","am"],"A"],
        ["This pencil is ___ than that one.",["short","shorter","the shortest"],"B"],
      ];
      for(let i=0;i<qs.length;i++){ const n=i+1, [text,opts,key]=qs[i];
        JUNIOR_QUESTIONS.push({n,text,choices:[{key:'A',text:opts[0]},{key:'B',text:opts[1]},{key:'C',text:opts[2]}]});
        JUNIOR_ANSWERS[n]=key;
      }
      while(JUNIOR_QUESTIONS.length<60){
        const n=JUNIOR_QUESTIONS.length+1;
        JUNIOR_QUESTIONS.push({n,text:"Choose the correct article: ___ apple is red.",choices:[{key:'A',text:"A"},{key:'B',text:"An"},{key:'C',text:"The"}]});
        JUNIOR_ANSWERS[n]='B';
      }
    })();

    function levelByScore(score){
      if (score <= 9)  return 'A1+';
      if (score <= 18) return 'A2';
      if (score <= 27) return 'B1';
      if (score <= 36) return 'B1+';
      if (score <= 45) return 'B2';
      if (score <= 54) return 'B2+';
      return 'C1';
    }

    const setupEl=document.getElementById('test-setup');
    const runEl=document.getElementById('test-run');
    const resEl=document.getElementById('test-result');
    const qEl=document.getElementById('question');
    const chEl=document.getElementById('choices');
    const progLabel=document.getElementById('progress-label');
    const progBar=document.getElementById('progress-bar');
    const summary=document.getElementById('summary');
    const review=document.getElementById('review');

    let track='senior', length=20, bank=[], idx=0, answers={};

    document.querySelectorAll('input[name="track"]').forEach(r=>r.addEventListener('change', e=>track=e.target.value));
    document.querySelectorAll('input[name="len"]').forEach(r=>r.addEventListener('change', e=>length=parseInt(e.target.value,10)));

    document.getElementById('start').addEventListener('click', ()=>{
      bank = (track==='senior') ? GATEWAY_QUESTIONS.slice(0,length) : JUNIOR_QUESTIONS.slice(0,length);
      if(!bank.length) return;
      idx=0; answers={};
      setupEl.style.display='none';
      resEl.style.display='none';
      runEl.style.display='block';
      renderQuestion();
    });

    document.getElementById('next').addEventListener('click', ()=>{
      if(idx+1<bank.length){ idx+=1; renderQuestion(); }
      else { finish(); }
    });

    document.getElementById('restart').addEventListener('click', ()=>{
      setupEl.style.display='block';
      runEl.style.display='none';
      resEl.style.display='none';
      window.scrollTo({ top: document.getElementById('test').offsetTop - 80, behavior:'smooth' });
    });

    function renderQuestion(){
      const q=bank[idx];
      progLabel.textContent=`Вопрос ${idx+1} из ${bank.length}`;
      const pct=Math.round((idx)/bank.length*100); progBar.style.width=pct+'%';
      qEl.textContent=q.text;
      chEl.innerHTML='';
      const nextBtn=document.getElementById('next'); nextBtn.disabled=true;

      q.choices.forEach(c=>{
        const label=document.createElement('label');
        label.className='q';
        const input=document.createElement('input');
        input.type='radio'; input.name='q_'+q.n;
        input.addEventListener('change',()=>{
          chEl.querySelectorAll('.q').forEach(x=>x.classList.remove('sel'));
          label.classList.add('sel');
          answers[q.n]=c.key; nextBtn.disabled=false;
        });
        const k=document.createElement('span'); k.className='k'; k.textContent=c.key+'.';
        const t=document.createElement('span'); t.textContent=c.text;
        label.appendChild(input); label.appendChild(k); label.appendChild(t);
        chEl.appendChild(label);
      });
      window.scrollTo({ top: document.getElementById('test').offsetTop - 80, behavior:'smooth' });
    }

    function finish(){
      runEl.style.display='none'; resEl.style.display='block';
      let score=0;
      bank.forEach(q=>{
        const key=(track==='senior')? GATEWAY_ANSWERS[q.n] : JUNIOR_ANSWERS[q.n];
        if(answers[q.n]===key) score+=1;
      });
      const level=levelByScore(score);
      summary.innerHTML=`Результат: ${score} / ${bank.length} · Уровень: <span style="color:#8c6400;background:#fff4b8;padding:2px 8px;border-radius:999px;">${level}</span>`;
      review.innerHTML='';
      bank.forEach(q=>{
        const key=(track==='senior')? GATEWAY_ANSWERS[q.n] : JUNIOR_ANSWERS[q.n];
        const pick=answers[q.n]; const ok=pick===key;
        const div=document.createElement('div'); div.className='q '+(ok?'ok':'bad');
        const title=document.createElement('div'); title.style.fontWeight='800'; title.style.marginBottom='4px'; title.textContent=`${q.n}. ${q.text}`;
        const meta=document.createElement('div'); meta.className='muted'; meta.style.fontSize='13px'; meta.innerHTML=`Ваш ответ: <b>${pick||'—'}</b> · Правильно: <b>${key}</b>`;
        div.appendChild(title); div.appendChild(meta); review.appendChild(div);
      });
      window.scrollTo({ top: document.getElementById('test').offsetTop - 80, behavior:'smooth' });
    }
  });
  </script>
</body>
</html>
